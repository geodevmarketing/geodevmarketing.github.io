<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maps - CNCT</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/cards.css">
<style>
    /* Map pleine page */
    #map {
        width: 100%;
        height: 100vh;
    }

    /* Menu latéral */
    #sideMenu {
        position: fixed;
        top: 0;
        left: -250px;
        width: 250px;
        height: 100%;
        background: #0a9396;
        color: #fff;
        padding: 20px;
        transition: 0.3s;
        z-index: 1000;
    }

    #sideMenu.open { left: 0; }

    .menu-btn {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1100;
        background: #005f73;
        color: #fff;
        border: none;
        padding: 10px;
        cursor: pointer;
        border-radius: 6px;
    }
</style>
</head>
<body>

<!-- Menu latéral -->
<div id="sideMenu">
    <h2>Menu Produit / Service</h2>
    <p id="map-title">Titre du produit</p>
    <p id="map-scale">Échelle</p>
    <hr>
    <a href="index.html" class="menu-link">Accueil</a>
    <a href="produits.html" class="menu-link">Produits</a>
    <a href="services.html" class="menu-link">Services</a>
</div>

<!-- Bouton menu -->
<button class="menu-btn" onclick="toggleMenu()">☰ Menu</button>

<!-- Google Map -->
<div id="map"></div>

<script>
function toggleMenu() {
    document.getElementById("sideMenu").classList.toggle("open");
    // Important : resize map pour qu'elle reste centrée après ouverture/fermeture
    if(window.map) google.maps.event.trigger(window.map, 'resize');
}

// Initialisation de la map
function initMap() {
    const defaultCenter = { lat: 34.0, lng: 9.0 };

    // Création de la map globale
    window.map = new google.maps.Map(document.getElementById("map"), {
        zoom: 6,
        center: defaultCenter
    });

    // Exemple de marker
    new google.maps.Marker({
        position: defaultCenter,
        map: window.map,
        title: "CNCT"
    });

    // Lire le paramètre type depuis URL
    const params = new URLSearchParams(window.location.search);
    const type = params.get("type") || "produit";

    const titles = {
        topo25k: "Cartes topographiques 1:25 000",
        topo50k: "Cartes topographiques 1:50 000",
        topo100k: "Cartes topographiques 1:100 000",
        marine5k: "Cartes marines 1:5 000",
        marine15k: "Cartes marines 1:15 000",
        marine25k: "Cartes marines 1:25 000",
        marine50k: "Cartes marines 1:50 000",
        marine75k: "Cartes marines 1:75 000",
        marine150k: "Cartes marines 1:150 000",
        thematique: "Cartes thématiques",
        pva: "Photos aériennes (PVA)",
        satellite: "Images satellitaires",
        mnt: "Modèles Numériques de Terrain (MNT)",
        ortho: "Ortho-photos"
    };

    document.getElementById("map-title").textContent = titles[type] || "Produit";
}
</script>

<!-- Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>

</body>
</html>
